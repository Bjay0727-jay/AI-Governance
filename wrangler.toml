# ============================================================================
# ForgeAI Governâ„¢ - Cloudflare Workers Configuration
# ============================================================================
# Deployment: npx wrangler deploy
# Local dev:  npx wrangler dev
# ============================================================================

name = "forgeai-govern"
main = "src/api/worker.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Static frontend assets served automatically
[assets]
directory = "./src/frontend"

[vars]
ENVIRONMENT = "production"

# D1 SQLite Database
# Create with: npx wrangler d1 create forgeai-govern-db
# Then update database_id below with the returned ID
[[d1_databases]]
binding = "DB"
database_name = "forgeai-govern-db"
database_id = "c20c9759-46e2-4b9d-9744-7c72759b640d"
migrations_dir = "migrations"

[[r2_buckets]]
binding = "EVIDENCE_STORE"
bucket_name = "forgeai-evidence"

[[kv_namespaces]]
binding = "SESSION_CACHE"
id = "72057762e6e7432baf6af57956f78b65"

[assets]
directory = "./src/frontend"
html_handling = "auto-trailing-slash"
not_found_handling = "single-page-application"
